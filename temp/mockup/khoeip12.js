var tvtad="";$(document).ready(function(){if(window.location.hostname==tmbq){$("#tad-taianhve").hide();$(".tad-ketqua").hide();$("#tad-taoanh").click(function(){$(".load-anh").fadeIn(500,function(){k()})});var h=document.getElementById("Cimg");var f=document.getElementById("Bimg");var g=document.getElementById("Limg");var i=document.getElementById("Nimg");function k(){c=document.querySelector("canvas"),ctx=c.getContext("2d"),corners=[{x:-20,y:150},{x:1161,y:272},{x:1106,y:863},{x:66,y:1031}],corners1=[{x:1893,y:326},{x:1222,y:280},{x:1173,y:850},{x:1821,y:694}],step=1;a();function a(){var t,u,d,j,A,s,v,z,e=h.width-1,w=h.height-1;ctx.clearRect(0,0,c.width,c.height);ctx.save();ctx.drawImage(f,0,0,c.width,c.height);for(y=0;y<w;y+=step){for(x=0;x<e;x+=step){A=b(corners[0],corners[3],y/w);s=b(corners[1],corners[2],y/w);v=b(corners[0],corners[3],(y+step)/w);z=b(corners[1],corners[2],(y+step)/w);t=b(A,s,x/e);u=b(A,s,(x+step)/e);d=b(v,z,(x+step)/e);j=b(v,z,x/e);ctx.drawImage(h,x,y,step,step,t.x,t.y,Math.ceil(Math.max(step,Math.abs(u.x-t.x),Math.abs(j.x-d.x)))+1,Math.ceil(Math.max(step,Math.abs(t.y-j.y),Math.abs(u.y-d.y)))+1)}}for(y=0;y<w;y+=step){for(x=0;x<e;x+=step){A=b(corners1[0],corners1[3],y/w);s=b(corners1[1],corners1[2],y/w);v=b(corners1[0],corners1[3],(y+step)/w);z=b(corners1[1],corners1[2],(y+step)/w);t=b(A,s,x/e);u=b(A,s,(x+step)/e);d=b(v,z,(x+step)/e);j=b(v,z,x/e);ctx.drawImage(h,x,y,step,step,t.x,t.y,Math.ceil(Math.max(step,Math.abs(u.x-t.x),Math.abs(j.x-d.x)))+1,Math.ceil(Math.max(step,Math.abs(t.y-j.y),Math.abs(u.y-d.y)))+1)}}ctx.save();ctx.globalAlpha=0.8;ctx.drawImage(i,0,0,c.width,c.height);ctx.restore();ctx.save();ctx.drawImage(g,0,0,c.width,c.height);ctx.restore();c.toBlob(function(m){var l=URL.createObjectURL(m);$("#img-out").html("<img src='"+l+"' alt='Tạo ảnh đẹp' class='img-thumbnail'></img>");$("#tad-taianhve").attr("download",tenanhxuat).attr("href",l)});$("#tad-taianhve").show();$(".tad-ketqua").show();$(".load-anh").fadeOut(500)}function b(d,e,j){return{x:d.x+(e.x-d.x)*j,y:d.y+(e.y-d.y)*j}}}}});