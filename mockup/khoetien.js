var tvtad="";$(document).ready(function(){if(window.location.hostname==tmbq){$("#tad-taianhve").hide();$(".tad-ketqua").hide();var j=document.getElementById("Cimg");var a=document.getElementById("Limg");var d=document.getElementById("Nimg");var e=[{x:241,y:257},{x:717,y:203},{x:818,y:1041},{x:280,y:1101}];$(".chonmau #kieu1").click(function(){e=[{x:241,y:257},{x:717,y:203},{x:818,y:1041},{x:280,y:1101}];$("#Limg").attr("src","https://1.bp.blogspot.com/-j0u4l_FFraE/YLsjsK4buiI/AAAAAAAAtdc/bxTtrOM35xMJ_gYbVsoQT1pG2ZffNCN3QCNcBGAsYHQ/s0/dt1.png")});$(".chonmau #kieu2").click(function(){e=[{x:254,y:628},{x:631,y:316},{x:1255,y:928},{x:909,y:1332}];$("#Limg").attr("src","https://1.bp.blogspot.com/-K7Qpsprf_cg/YLtI7nr6muI/AAAAAAAAteA/vy5JX3F7h2cSzTdtPfBxjHixCkQ6QUbKwCNcBGAsYHQ/s0/dt2.png")});$(".chonmau #kieu3").click(function(){e=[{x:510,y:575},{x:954,y:557},{x:1036,y:1330},{x:500,y:1380}];$("#Limg").attr("src","https://1.bp.blogspot.com/-7ksdaD6DFfE/YLsjsMCn_RI/AAAAAAAAtdg/upKyXaAGlXstLiSCfpCybCMhGyxUUWxbgCNcBGAsYHQ/s0/dt3.png")});$(".chonmau #kieu4").click(function(){e=[{x:392,y:640},{x:1030,y:558},{x:1306,y:1748},{x:548,y:1881}];$("#Limg").attr("src","https://1.bp.blogspot.com/-m5BUVL_b1mE/YLtJAzGKmQI/AAAAAAAAteE/_HqSQAs8RHwJYuMeyw7_KWBfhoaAiLQygCNcBGAsYHQ/s0/dt4.png")});$("#tad-taoanh").click(function(){$(".load-anh").fadeIn(500,function(){b()})});function b(){c=document.querySelector("canvas"),ctx=c.getContext("2d"),corners=e,step=1;g();function g(){var n,m,s,q,h,o,l,i,r=j.width-1,k=j.height-1;ctx.clearRect(0,0,c.width,c.height);for(y=0;y<k;y+=step){for(x=0;x<r;x+=step){h=f(corners[0],corners[3],y/k);o=f(corners[1],corners[2],y/k);l=f(corners[0],corners[3],(y+step)/k);i=f(corners[1],corners[2],(y+step)/k);n=f(h,o,x/r);m=f(h,o,(x+step)/r);s=f(l,i,(x+step)/r);q=f(l,i,x/r);ctx.drawImage(j,x,y,step,step,n.x,n.y,Math.ceil(Math.max(step,Math.abs(m.x-n.x),Math.abs(q.x-s.x)))+1,Math.ceil(Math.max(step,Math.abs(n.y-q.y),Math.abs(m.y-s.y)))+1)}}ctx.save();ctx.globalAlpha=0.3;ctx.fillStyle="#333";ctx.fillRect(0,0,c.width,c.height);ctx.restore();ctx.save();ctx.drawImage(a,0,0,c.width,c.height);ctx.restore();if(d){ctx.save();ctx.globalAlpha=0.8;var p=ctx.createPattern(d,"repeat");ctx.fillStyle=p;ctx.fillRect(0,0,c.width,c.height);ctx.restore()}c.toBlob(function(t){var u=URL.createObjectURL(t);$("#img-out").html("<img src='"+u+"' alt='Tạo ảnh đẹp' class='img-thumbnail'></img>");$("#tad-taianhve").attr("download",tenanhxuat).attr("href",u)});$("#tad-taianhve").show();$(".tad-ketqua").show();$(".load-anh").fadeOut(500)}function f(l,i,h){return{x:l.x+(i.x-l.x)*h,y:l.y+(i.y-l.y)*h}}}}});