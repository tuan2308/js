var tvtad="";$(document).ready(function(){if(window.location.hostname==tmbq){$("#tad-taianhve").hide();$(".tad-ketqua").hide();var h=document.getElementById("Cimg");var g=new Image;g.crossOrigin="Anonymous";g.src="https://1.bp.blogspot.com/-pwfT4KXk8bw/YMmrXkZ_hwI/AAAAAAAAt4s/-FuyPWUa5-I5urt5jyjq2_oFDdre7q5bACNcBGAsYHQ/s0/layer1.jpg";var i=new Image;i.crossOrigin="Anonymous";i.src="https://1.bp.blogspot.com/-c0zMHnF5Y58/YMmshAVD89I/AAAAAAAAt48/LMNOiPK6wrInAPYFckcc-3mzpMcLH_rLQCNcBGAsYHQ/s0/mark1.png";var l=document.getElementById("Nimg");var m=[{x:286.0078125,y:522.0078125},{x:991.0078125,y:642.0078125},{x:1030.0078125,y:1065.0078125},{x:284.0078125,y:1068.0078125}];var k=m;$(".chonmau #kieu1").click(function(){k=m;g.src="https://1.bp.blogspot.com/-pwfT4KXk8bw/YMmrXkZ_hwI/AAAAAAAAt4s/-FuyPWUa5-I5urt5jyjq2_oFDdre7q5bACNcBGAsYHQ/s0/layer1.jpg";i.src="https://1.bp.blogspot.com/-c0zMHnF5Y58/YMmshAVD89I/AAAAAAAAt48/LMNOiPK6wrInAPYFckcc-3mzpMcLH_rLQCNcBGAsYHQ/s0/mark1.png"});$(".chonmau #kieu2").click(function(){k=[{x:277.0078125,y:190.0078125},{x:1174.0078125,y:181.0078125},{x:1162.0078125,y:643.0078125},{x:364.0078125,y:814.0078125}];g.src="https://1.bp.blogspot.com/-mC6skGGok24/YMmvgUUglpI/AAAAAAAAt5I/3ESN5GFl9kEsHE81iKMydCxFZPesK25fwCNcBGAsYHQ/s0/layer2.jpg";i.src="https://1.bp.blogspot.com/-69VsiBxzcgE/YMmvgRSe68I/AAAAAAAAt5E/dj1CU39WNPgzwm1zkjIgG_Re4e0Ddjt3QCNcBGAsYHQ/s0/mark2.png"});$(".chonmau #kieu3").click(function(){k=[{x:285.0078125,y:141.0078125},{x:1131.0078125,y:284.0078125},{x:1110.0078125,y:721.0078125},{x:275.0078125,y:721.0078125}];g.src="https://1.bp.blogspot.com/-1KjKT4JhBao/YMmwYwBd2NI/AAAAAAAAt5Y/AY1dHAiiMTk4NoylJouw62814iEPrc15gCNcBGAsYHQ/s0/layer3.jpg";i.src="https://1.bp.blogspot.com/-BaGluruwYJI/YMmwYVVI1mI/AAAAAAAAt5U/NWVvWr4lj_0-wKSGBz2ukUe7rV0f7M4_QCNcBGAsYHQ/s0/mark3.png"});$(".chonmau #kieu4").click(function(){k=[{x:204.0078125,y:328.0078125},{x:1202.0078125,y:391.0078125},{x:1120.0078125,y:835.0078125},{x:252.0078125,y:881.0078125}];g.src="https://1.bp.blogspot.com/-3fvHHeNlwHY/YMmxEEBaHuI/AAAAAAAAt5o/aVffZ_8raNINAPj-Q50W33KcsCnV0qQKgCNcBGAsYHQ/s0/layer4.jpg";i.src="https://1.bp.blogspot.com/-SgHEdCuAgWM/YMmxEPutATI/AAAAAAAAt5k/8owsEpAzIJUJaP-HOYijrSi98bsNvR9cwCNcBGAsYHQ/s0/mark4.png"});$("#tad-taoanh").click(function(){$(".load-anh").fadeIn(500,function(){g.onload=f()})});function f(){c=document.querySelector("canvas"),ctx=c.getContext("2d"),corners=k,step=1;a();function a(){var u,v,C,e,B,t,w,A,d=h.width-1,z=h.height-1;ctx.clearRect(0,0,c.width,c.height);ctx.save();for(y=0;y<z;y+=step){for(x=0;x<d;x+=step){B=b(corners[0],corners[3],y/z);t=b(corners[1],corners[2],y/z);w=b(corners[0],corners[3],(y+step)/z);A=b(corners[1],corners[2],(y+step)/z);u=b(B,t,x/d);v=b(B,t,(x+step)/d);C=b(w,A,(x+step)/d);e=b(w,A,x/d);ctx.drawImage(h,x,y,step,step,u.x,u.y,Math.ceil(Math.max(step,Math.abs(v.x-u.x),Math.abs(e.x-C.x)))+1,Math.ceil(Math.max(step,Math.abs(u.y-e.y),Math.abs(v.y-C.y)))+1)}}ctx.globalCompositeOperation="destination-in";ctx.drawImage(i,0,0,c.width,c.height);ctx.restore();ctx.save();ctx.globalCompositeOperation="destination-over";ctx.drawImage(g,0,0,c.width,c.height);ctx.restore();if(l){ctx.save();ctx.globalAlpha=0.5;var j=ctx.createPattern(l,"repeat");ctx.fillStyle=j;ctx.fillRect(0,0,c.width,c.height);ctx.restore()}c.toBlob(function(o){var n=URL.createObjectURL(o);$("#img-out").html("<img src='"+n+"' alt='Tạo ảnh đẹp' class='img-thumbnail'></img>");$("#tad-taianhve").attr("download",tenanhxuat).attr("href",n)});$("#tad-taianhve").show();$(".tad-ketqua").show();$(".load-anh").fadeOut(500)}function b(d,e,j){return{x:d.x+(e.x-d.x)*j,y:d.y+(e.y-d.y)*j}}}}});