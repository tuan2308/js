$(document).ready(function(){if(window.location.hostname==tmbq){function f(){var c=$(".tad-in-text1").val().toUpperCase();var d=$(".tad-in-text2").val().toUpperCase();var a=document.getElementById("Cimg1");var b=document.getElementById("Cimg2");document.fonts.load('10pt "SVN-Transformer"').then(function(){document.fonts.load('10pt "UTM Neutra"').then(function(){var j=new Image();j.crossOrigin="Anonymous";j.src="https://lh3.googleusercontent.com/-fZCMTr-l7G8/YWpPNl2dZ_I/AAAAAAAAyRc/1BArOWj6NSUr0shPcOQoYICvocT7RyDDACNcBGAsYHQ/s0/layer.png";j.onload=function(){var t=document.getElementById("temp");var r=t.getContext("2d");r.clearRect(0,0,t.width,t.height);r.save();r.fillStyle="#fff";r.font="35px UTM Neutra";r.textAlign="center";var u=d.split("").join(String.fromCharCode(8200));var q=r.measureText(u).width;var v=100;r.fillRect(t.width/2-q/2-v/2,512,q+v,50);r.globalCompositeOperation="destination-out";r.fillText(u,t.width/2,550);r.restore();r.save();r.globalCompositeOperation="destination-over";gradient2=r.createLinearGradient(0,0,0,630);gradient2.addColorStop(0,"rgba(0,0,0,0)");gradient2.addColorStop(1,"rgba(0,0,0,0.5)");r.fillStyle=gradient2;r.fillRect(0,0,1702,630);r.restore();r.save();r.globalCompositeOperation="destination-over";var s=$("#tad-blur").val();r.filter="blur("+s+"px)";r.drawImage(b,-10,-10,1722,650);r.restore();r.save();r.drawImage(j,0,0,1702,630);r.restore();r.save();r.beginPath();r.translate(724,116);var i=255;r.arc(i/2,i/2,i/2,0,Math.PI*2,true);r.closePath();r.clip();r.drawImage(a,0,0,i,i);r.arc(i/2,i/2,i/2,0,Math.PI*2,true);r.lineWidth=10;r.strokeStyle="white";r.stroke();r.restore();r.save();r.fillStyle="#fff";r.font="65px SVN-Transformer";r.textAlign="center";r.fillText(c,t.width/2,500);r.restore();tadUpload(t)}})})}function e(){$(".chonnen").html("");anhnen.forEach(function(a,b){$(".chonnen").append("<div class='col mb-3 text-center'><img alt='Hình nền' class='img-thumbnail' src='"+a+"'></div>")});$("#cropanh").click(function(){$(".dk1").val(1);$(".chonnen div").removeClass("active")});$(".chonnen div").click(function(){$(".btn-chonnen").html("<i class='fas fa-image'></i> Chọn nền khác");$(".dk2").val(1);$(".chonnen div").removeClass("active");$(this).addClass("active");var a=$(this).children().attr("src").replace(/s200/g,"s0");$("#Cimg2,.img-preview2 img").attr("src",a);$("#chonanhModal2").modal("hide")})}$(".btn-chonnen").one("click",function(){e()});$("head").append(xlha);$("head").append(cssCrop);$("body").append("<input class='cropanh d-none' value=''>");var g=$(".dk1").val();var h=$(".dk1").val();$("#tad-taianhve").hide();$(".tad-ketqua").hide();$("#tad-taoanh").click(function(){var b=new Date();var c=((b.getHours()<10)?"0":"")+b.getHours()+":"+((b.getMinutes()<10)?"0":"")+b.getMinutes();var a=c;$(".tad-time").text(a);if($(".dk1").val()==""){alert("Vui lòng chọn avatar");$("#chonanhModal1").modal("show");return false}if($(".dk2").val()==""){alert("Vui lòng chọn ảnh nền");e();$("#chonanhModal2").modal("show");return false}if($(".tad-in-text1").val()==""){alert("Bạn chưa nhập tên");$(".tad-in-text1").focus();return false}if($(".tad-in-text2").val()==""){alert("Bạn chưa nhập tên phụ");$(".tad-in-text2").focus();return false}t1=$(".tad-in-text1").val();$(".tad-out-text1").html(t1);t2=$(".tad-in-text2").val();$(".tad-out-text2").html(t2);$("#cropanh1").click();$("#cropanh2").click();$("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");$("#img-out").hide();setTimeout(function(){f()},1000)});$(".btn-upanh1").click(function(){$(".cropanh-container1 .cropper-container").remove();"use strict";var b=window.Cropper;var d=window.URL||window.webkitURL;var u=document.querySelector(".img-container1");var t=u.getElementsByTagName("img").item(0);var w=document.getElementById("download1");var r=document.getElementById("actions1");var a={aspectRatio:1/1,viewMode:1,preview:".img-preview1",autoCrop:true,strict:true,background:true,autoCropArea:1};var v=new b(t,a);var s=t.src;var x="image/jpeg";var q;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}r.querySelector(".docs-buttons1").onclick=function(m){var i=m||window.event;var j=i.target||i.srcElement;var k;var o;var n;var l;if(!v){return}while(j!==this){if(j.getAttribute("data-method")){break}j=j.parentNode}if(j===this||j.disabled||j.className.indexOf("disabled")>-1){return}l={method:j.getAttribute("data-method"),target:j.getAttribute("data-target"),option:j.getAttribute("data-option")||undefined,secondOption:j.getAttribute("data-second-option")||undefined};k=v.cropped;if(l.method){if(typeof l.target!=="undefined"){n=document.querySelector(l.target);if(!j.hasAttribute("data-option")&&l.target&&n){try{l.option=JSON.parse(n.value)}catch(i){console.log(i.message)}}}switch(l.method){case"rotate":if(k){v.clear()}break;case"getCroppedCanvas":try{l.option=JSON.parse(l.option)}catch(i){console.log(i.message)}if(x==="image/jpeg"){if(!l.option){l.option={}}l.option.fillColor="#fff"}break}o=v[l.method](l.option,l.secondOption);switch(l.method){case"rotate":if(k){v.crop()}break;case"scaleX":case"scaleY":j.setAttribute("data-option",-l.option);break;case"getCroppedCanvas":o.toBlob(function(p){var z=d.createObjectURL(p);$("#Cimg1").attr("src",z)},"image/jpeg",1);break;case"destroy":v=null;if(q){d.revokeObjectURL(q);q="";t.src=s}break}if(typeof o==="object"&&o!==v&&n){try{n.value=JSON.stringify(o)}catch(i){console.log(i.message)}}}};document.body.onkeydown=function(j){var i=j||window.event;if(!v||this.scrollTop>300){return}switch(i.keyCode){case 37:i.preventDefault();v.move(-1,0);break;case 38:i.preventDefault();v.move(0,-1);break;case 39:i.preventDefault();v.move(1,0);break;case 40:i.preventDefault();v.move(0,1);break}};$(".cropanh-container1").hide();var c=document.getElementById("inputImage1");if(d){c.onchange=function(){var i=this.files;var j;if(v&&i&&i.length){j=i[0];if(/^image\/\w+/.test(j.type)){x=j.type;if(q){d.revokeObjectURL(q)}t.src=q=d.createObjectURL(j);v.destroy();v=new b(t,a);c.value=null;$(".cropanh-container1").show();$(".dk1").val(1);$(".btn-upanh1 span,.btn-chonanh1").html("<i class='fas fa-upload'></i> Chọn ảnh khác")}else{window.alert("Please choose an image file.")}}}}else{c.disabled=true;c.parentNode.className+=" disabled"}});$(".btn-upanh2").click(function(){$(".cropanh-container2 .cropper-container").remove();"use strict";var b=window.Cropper;var d=window.URL||window.webkitURL;var u=document.querySelector(".img-container2");var t=u.getElementsByTagName("img").item(0);var w=document.getElementById("download2");var r=document.getElementById("actions2");var a={aspectRatio:1702/630,viewMode:1,preview:".img-preview2",autoCrop:true,strict:true,background:true,autoCropArea:1};var v=new b(t,a);var s=t.src;var x="image/jpeg";var q;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}r.querySelector(".docs-buttons2").onclick=function(m){var i=m||window.event;var j=i.target||i.srcElement;var k;var o;var n;var l;if(!v){return}while(j!==this){if(j.getAttribute("data-method")){break}j=j.parentNode}if(j===this||j.disabled||j.className.indexOf("disabled")>-1){return}l={method:j.getAttribute("data-method"),target:j.getAttribute("data-target"),option:j.getAttribute("data-option")||undefined,secondOption:j.getAttribute("data-second-option")||undefined};k=v.cropped;if(l.method){if(typeof l.target!=="undefined"){n=document.querySelector(l.target);if(!j.hasAttribute("data-option")&&l.target&&n){try{l.option=JSON.parse(n.value)}catch(i){console.log(i.message)}}}switch(l.method){case"rotate":if(k){v.clear()}break;case"getCroppedCanvas":try{l.option=JSON.parse(l.option)}catch(i){console.log(i.message)}if(x==="image/jpeg"){if(!l.option){l.option={}}l.option.fillColor="#fff"}break}o=v[l.method](l.option,l.secondOption);switch(l.method){case"rotate":if(k){v.crop()}break;case"scaleX":case"scaleY":j.setAttribute("data-option",-l.option);break;case"getCroppedCanvas":if(o){o.toBlob(function(p){var z=d.createObjectURL(p);$("#Cimg2").attr("src",z)},"image/jpeg",1)}break;case"destroy":v=null;if(q){d.revokeObjectURL(q);q="";t.src=s}break}if(typeof o==="object"&&o!==v&&n){try{n.value=JSON.stringify(o)}catch(i){console.log(i.message)}}}};document.body.onkeydown=function(j){var i=j||window.event;if(!v||this.scrollTop>300){return}switch(i.keyCode){case 37:i.preventDefault();v.move(-1,0);break;case 38:i.preventDefault();v.move(0,-1);break;case 39:i.preventDefault();v.move(1,0);break;case 40:i.preventDefault();v.move(0,1);break}};$(".cropanh-container2").hide();var c=document.getElementById("inputImage2");if(d){c.onchange=function(){var i=this.files;var j;if(v&&i&&i.length){j=i[0];if(/^image\/\w+/.test(j.type)){x=j.type;if(q){d.revokeObjectURL(q)}t.src=q=d.createObjectURL(j);v.destroy();v=new b(t,a);c.value=null;$(".cropanh-container2").show();$(".dk2").val(1);$(".btn-upanh2 span,.btn-chonanh2").html("<i class='fas fa-upload'></i> Chọn ảnh khác");$(".chonnen div").removeClass("active")}else{window.alert("Please choose an image file.")}}}}else{c.disabled=true;c.parentNode.className+=" disabled"}})}});