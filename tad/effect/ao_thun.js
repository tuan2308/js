$(document).ready(function(){if(window.location.hostname==tmbq){$("head").append(jsCrop);$("head").append(cssCrop);$("body").append("<input class='cropanh1 d-none' value=''>");$("body").append("<input class='cropanh2 d-none' value=''>");var h=$(".cropanh1");var g=$(".cropanh2");var b=$(".tad-in-text1");var a=$(".tad-in-text2");var k=$(".tad-in-text3");var A=$(".tad-in-texta");$("#cropanh1").click(function(){$(".cropanh1").val(1);d()});$("#cropanh2").click(function(){$(".cropanh2").val(1);d()});b.on("input",function(){d()});a.on("input",function(){d()});k.on("input",function(){d()});A.on("input",function(){d()});function d(){if(undefined!==h.val()&&h.val().length==""){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==g.val()&&g.val().length==""){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==b.val()&&b.val().length==0){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==a.val()&&a.val().length==0){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==k.val()&&k.val().length==0){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==A.val()&&A.val().length==0){$("#tad-taoanh").addClass("disabled")}else{$("#tad-taoanh").removeClass("disabled")}}}}}}}function e(){var n=document.createElement("canvas");n.width=200;n.height=200;var m=n.getContext("2d");x=n.width/2;y=n.height/2;lineHeight=15;m.fillStyle="white";x=n.width/2;y=n.height/2;m.save();m.translate(x,y);m.rotate(-Math.PI/4);m.textAlign="center";var l=$(".tad-in-text1").val();cr=m.measureText(l).width;font=n.width*12/cr;m.font=font+"px UTM Gloria";m.fillText(l,0,lineHeight/2);n.toBlob(function(p){var r=URL.createObjectURL(p);var o=new Image();o.src=r;o.onload=function(){c(o)}})}var f=0;$(".chonmau #kieu1").click(function(){f=0});$(".chonmau #kieu2").click(function(){f=1});function c(n){var s=document.getElementById("temp");var m=s.getContext("2d");m.clearRect(0,0,s.width,s.height);m.fillStyle="#1a1b20";m.fillRect(0,0,s.width,s.height);var n=n;var o=m.createPattern(n,"repeat");m.rect(0,0,s.width,s.height);m.fillStyle=o;m.fill();if(f==0){m.save();let q=document.getElementById("Limg");m.drawImage(q,0,0,s.width,s.height);m.restore();m.save();var r=document.getElementById("Cimg");var t=350;m.rotate(7*Math.PI/180);m.translate(415,170);m.drawImage(r,0,0,t,t*6/9);m.restore();m.save();var p=document.getElementById("Aimg");var l=180;m.rotate(7*Math.PI/180);m.translate(500,300);m.beginPath();m.strokeStyle="white";m.lineWidth=5;m.arc(l/2,l/2,l/2,0,Math.PI*2,true);m.stroke();m.closePath();m.clip();m.drawImage(p,0,0,l,l);m.beginPath();m.arc(0,0,l/2,0,Math.PI*2,true);m.clip();m.closePath();m.restore();m.save();lineHeight=15;m.font="700 30px Arial";m.translate(520,580);m.rotate(7*Math.PI/180);m.textAlign="center";m.fillStyle="black";txt1=$(".tad-in-text1").val();m.fillText(txt1,0,lineHeight/2);m.restore();m.save();lineHeight=15;m.font="15px Arial";m.translate(515,610);m.rotate(7*Math.PI/180);m.textAlign="center";m.fillStyle="#555";txta=$(".tad-in-text2").val();m.fillText(txta,0,lineHeight/2);m.restore();m.save();m.globalCompositeOperation="darken";m.drawImage(q,0,0,s.width,s.height);m.restore()}else{m.save();m.save();let q=document.getElementById("Limg2");m.drawImage(q,0,0,s.width,s.height);m.restore();var r=document.getElementById("Cimg");var t=250;m.translate(420,145);m.drawImage(r,0,0,t,t*6/9);m.restore();m.save();var p=document.getElementById("Aimg");var l=125;m.translate(480,235);m.beginPath();m.strokeStyle="white";m.lineWidth=5;m.arc(l/2,l/2,l/2,0,Math.PI*2,true);m.stroke();m.closePath();m.clip();m.drawImage(p,0,0,l,l);m.beginPath();m.arc(0,0,l/2,0,Math.PI*2,true);m.clip();m.closePath();m.restore();m.save();lineHeight=15;m.font="700 25px Arial";m.translate(540,385);m.textAlign="center";m.fillStyle="black";txt1=$(".tad-in-text1").val();m.fillText(txt1,0,lineHeight/2);m.restore();m.save();lineHeight=15;m.font="15px Arial";m.translate(540,410);m.textAlign="center";m.fillStyle="#555";txta=$(".tad-in-text2").val();m.fillText(txta,0,lineHeight/2);m.restore();m.save();m.globalCompositeOperation="darken";m.drawImage(q,0,0,s.width,s.height);m.restore()}tadUpload(s)}var j=$("#dk1").val();var i=$("#dk2").val();$("#img-out").hide();$("#tad-taianhve").hide();$(".tad-ketqua").hide();$("#tad-taoanh").addClass("disabled");$("#tad-taoanh").click(function(){$("#cropanh1").click();$("#cropanh2").click();$("#img-out").hide();$("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");document.fonts.load('10pt "UTM Gloria"').then(e)});$(".btn-upanh1").click(function(){$(".cropanh-container1 .cropper-container").remove();"use strict";var n=window.Cropper;var l=window.URL||window.webkitURL;var s=document.querySelector(".img-container1");var t=s.getElementsByTagName("img").item(0);var v=document.getElementById("actions1");var o={aspectRatio:1/1,viewMode:1,preview:".img-preview1",autoCrop:true,strict:true,background:true,autoCropArea:1};var r=new n(t,o);var u=t.src;var p="image/jpeg";var w;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}v.querySelector(".docs-buttons1").onclick=function(N){var E=N||window.event;var D=E.target||E.srcElement;var B;var M;var C;var z;if(!r){return}while(D!==this){if(D.getAttribute("data-method")){break}D=D.parentNode}if(D===this||D.disabled||D.className.indexOf("disabled")>-1){return}z={method:D.getAttribute("data-method"),target:D.getAttribute("data-target"),option:D.getAttribute("data-option")||undefined,secondOption:D.getAttribute("data-second-option")||undefined};B=r.cropped;if(z.method){if(typeof z.target!=="undefined"){C=document.querySelector(z.target);if(!D.hasAttribute("data-option")&&z.target&&C){try{z.option=JSON.parse(C.value)}catch(E){console.log(E.message)}}}switch(z.method){case"rotate":if(B){r.clear()}break;case"getCroppedCanvas":try{z.option=JSON.parse(z.option)}catch(E){console.log(E.message)}if(p==="image/jpeg"){if(!z.option){z.option={}}z.option.fillColor="#fff"}break}M=r[z.method](z.option,z.secondOption);switch(z.method){case"rotate":if(B){r.crop()}break;case"scaleX":case"scaleY":D.setAttribute("data-option",-z.option);break;case"getCroppedCanvas":if(M){M.toBlob(function(G){var F=l.createObjectURL(G);$("#Aimg").attr("src",F);$("#dk1").val(1)})}break;case"destroy":r=null;if(w){l.revokeObjectURL(w);w="";t.src=u}break}if(typeof M==="object"&&M!==r&&C){try{C.value=JSON.stringify(M)}catch(E){console.log(E.message)}}}};document.body.onkeydown=function(z){var C=z||window.event;if(!r||this.scrollTop>300){return}switch(C.keyCode){case 37:C.preventDefault();r.move(-1,0);break;case 38:C.preventDefault();r.move(0,-1);break;case 39:C.preventDefault();r.move(1,0);break;case 40:C.preventDefault();r.move(0,1);break}};$(".cropanh-container1").hide();var m=document.getElementById("inputImage1");if(l){m.onchange=function(){var C=this.files;var z;if(r&&C&&C.length){z=C[0];if(/^image\/\w+/.test(z.type)){p=z.type;if(w){l.revokeObjectURL(w)}t.src=w=l.createObjectURL(z);r.destroy();r=new n(t,o);m.value=null;$(".cropanh-container1").show();$(".btn-upanh1 span,.btn-chonanh1").html("<i class='fas fa-upload'></i> Chọn ảnh khác");$(".cropanh1").val(1);d()}else{window.alert("Please choose an image file.")}}}}else{m.disabled=true;m.parentNode.className+=" disabled"}});$(".btn-upanh2").click(function(){$(".cropanh-container2 .cropper-container").remove();"use strict";var n=window.Cropper;var l=window.URL||window.webkitURL;var s=document.querySelector(".img-container2");var t=s.getElementsByTagName("img").item(0);var v=document.getElementById("actions2");var o={aspectRatio:9/6,viewMode:1,preview:".img-preview2",autoCrop:true,strict:true,background:true,autoCropArea:1};var r=new n(t,o);var u=t.src;var p="image/jpeg";var w;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}v.querySelector(".docs-buttons2").onclick=function(N){var E=N||window.event;var D=E.target||E.srcElement;var B;var M;var C;var z;if(!r){return}while(D!==this){if(D.getAttribute("data-method")){break}D=D.parentNode}if(D===this||D.disabled||D.className.indexOf("disabled")>-1){return}z={method:D.getAttribute("data-method"),target:D.getAttribute("data-target"),option:D.getAttribute("data-option")||undefined,secondOption:D.getAttribute("data-second-option")||undefined};B=r.cropped;if(z.method){if(typeof z.target!=="undefined"){C=document.querySelector(z.target);if(!D.hasAttribute("data-option")&&z.target&&C){try{z.option=JSON.parse(C.value)}catch(E){console.log(E.message)}}}switch(z.method){case"rotate":if(B){r.clear()}break;case"getCroppedCanvas":try{z.option=JSON.parse(z.option)}catch(E){console.log(E.message)}if(p==="image/jpeg"){if(!z.option){z.option={}}z.option.fillColor="#fff"}break}M=r[z.method](z.option,z.secondOption);switch(z.method){case"rotate":if(B){r.crop()}break;case"scaleX":case"scaleY":D.setAttribute("data-option",-z.option);break;case"getCroppedCanvas":if(M){M.toBlob(function(G){var F=l.createObjectURL(G);$("#Cimg").attr("src",F);$("#dk2").val(1)})}break;case"destroy":r=null;if(w){l.revokeObjectURL(w);w="";t.src=u}break}if(typeof M==="object"&&M!==r&&C){try{C.value=JSON.stringify(M)}catch(E){console.log(E.message)}}}};document.body.onkeydown=function(z){var C=z||window.event;if(!r||this.scrollTop>300){return}switch(C.keyCode){case 37:C.preventDefault();r.move(-1,0);break;case 38:C.preventDefault();r.move(0,-1);break;case 39:C.preventDefault();r.move(1,0);break;case 40:C.preventDefault();r.move(0,1);break}};$(".cropanh-container2").hide();var m=document.getElementById("inputImage2");if(l){m.onchange=function(){var C=this.files;var z;if(r&&C&&C.length){z=C[0];if(/^image\/\w+/.test(z.type)){p=z.type;if(w){l.revokeObjectURL(w)}t.src=w=l.createObjectURL(z);r.destroy();r=new n(t,o);m.value=null;$(".cropanh-container2").show();$(".btn-upanh2 span,.btn-chonanh2").html("<i class='fas fa-upload'></i> Chọn ảnh khác");$(".cropanh2").val(1);d()}else{window.alert("Please choose an image file.")}}}}else{m.disabled=true;m.parentNode.className+=" disabled"}})}});