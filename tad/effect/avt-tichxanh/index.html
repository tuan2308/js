<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'
        media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>

<body>
    <img class="d-none" crossorigin="anonymous" id="Cimg"
        src="https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png" />
    <script src="./cr.js" type="text/javascript"></script>
    <script src="https://cdn.taoanhdep.com/tad/tv/tad-crop.js" type="text/javascript"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css"
        integrity="sha512-0SPWAwpC/17yYyZ/4HSllgaK7/gg9OlVozq8K7rf3J8LvCjYEEIfzzpnA2/SSjpGIunCSD18r3UhvDcu/xncWA=="
        crossorigin="anonymous" referrerpolicy="no-referrer">

    <style>
        .xulyhinhanh img {
            margin: 0 !important
        }

        .chonanh-avt {
            width: 38px;
            height: 38px;
            float: left;
            border: 1px solid #ddd;
            border-radius: 5px;
            overflow: hidden;
            margin-right: 10px
        }

        .img-preview {
            width: 36px;
            height: 36px;
            background: url(//2.bp.blogspot.com/-ZTMZs1MahXE/XqZq3WgQKDI/AAAAAAAAdRI/ib4MFhw49m82VLY9b2LzZBw5w3tItLSrQCK4BGAYYCw/s36/thumbnail-man.png) no-repeat center;
            background-size: 36px
        }

        #chonanhModal {
            display: block !important
        }

        #chonanhModal:not(.show) {
            opacity: 0;
            visibility: hidden
        }

        .img-container,
        .img-preview {
            background-color: #f7f7f7;
            text-align: center;
            width: 100%
        }

        .img-container {
            margin-bottom: 1rem;
            max-height: 300px;
            min-height: 280px
        }

        .img-container>img {
            max-width: 100%
        }

        .img-preview {
            margin: auto !important;
            margin-bottom: .5rem;
            margin-right: .5rem;
            overflow: hidden
        }

        .img-preview>img {
            max-width: 100%
        }

        #temp {
            position: fixed;
            height: 0;
            top: 0;
            left: 0;
            overflow: hidden
        }
    </style>
    <div class="chonmau row row-cols-md-4 row-cols-2 mb-2">
        <div class="col mb-3 text-center">
            <a href="https://3.bp.blogspot.com/-sa8BrIwm-k8/XrF06LjHusI/AAAAAAAAd4Q/yDxBDQzYDUkTyFrD-VE3Y8SlHQYVNgItACNcBGAsYHQ/s1600/tick1.jpg"
                data-src="https://3.bp.blogspot.com/-sa8BrIwm-k8/XrF06LjHusI/AAAAAAAAd4Q/yDxBDQzYDUkTyFrD-VE3Y8SlHQYVNgItACNcBGAsYHQ/s1600/tick1.jpg"
                data-fancybox="gallery"><img alt="Tạo ảnh avatar facebook dấu tích xanh Online" class="img-thumbnail"
                    src="https://3.bp.blogspot.com/-sa8BrIwm-k8/XrF06LjHusI/AAAAAAAAd4Q/yDxBDQzYDUkTyFrD-VE3Y8SlHQYVNgItACNcBGAsYHQ/s320/tick1.jpg">
                <i class="fas fa-search-plus"></i></a>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="customRadioInline1" name="customRadioInline1" class="custom-control-input"
                    value="https://1.bp.blogspot.com/-KVeUUs6gMr4/YGk5Lv9LMHI/AAAAAAAArdk/S8tCaIwwGckmWlJ__JCvxq2wnQkN76XMgCNcBGAsYHQ/s0/tick-1.png"
                    checked="">
                <label class="custom-control-label" for="customRadioInline1">Kiểu 1</label>
            </div>
        </div>
        <div class="col mb-3 text-center">
            <a href="https://1.bp.blogspot.com/-omgrSQHWMhI/YB5TjS6Hr9I/AAAAAAAAovQ/ef3kgqDmrWEtch_LmIFjfeRANg10TzFBACNcBGAsYHQ/s800/taoanhdep_tich_xanh.jpg"
                data-src="https://1.bp.blogspot.com/-omgrSQHWMhI/YB5TjS6Hr9I/AAAAAAAAovQ/ef3kgqDmrWEtch_LmIFjfeRANg10TzFBACNcBGAsYHQ/s800/taoanhdep_tich_xanh.jpg"
                data-fancybox="gallery"><img alt="Tạo ảnh avatar facebook dấu tích xanh Online" class="img-thumbnail"
                    src="https://1.bp.blogspot.com/-omgrSQHWMhI/YB5TjS6Hr9I/AAAAAAAAovQ/ef3kgqDmrWEtch_LmIFjfeRANg10TzFBACNcBGAsYHQ/s320/taoanhdep_tich_xanh.jpg">
                <i class="fas fa-search-plus"></i></a>
            <div class="custom-control custom-radio custom-control-inline">
                <input type="radio" id="customRadioInline2" name="customRadioInline1" class="custom-control-input"
                    value="https://1.bp.blogspot.com/-ELbWSG53SBE/YGk5Ltt1XiI/AAAAAAAArdo/8FA9ZCxnNkYJCCVP9Su8MjWV5aTJ2ExVgCNcBGAsYHQ/s0/tick-2.png">
                <label class="custom-control-label" for="customRadioInline2">Kiểu 2</label>
            </div>
        </div>
    </div>
    <div class="xulyhinhanh">
        <div class="chonanh-avt">
            <div class="img-preview"></div>
        </div>
        <button type="button" class="btn btn-primary btn-chonanh" data-toggle="modal" data-target="#chonanhModal">
            <i class="fas fa-upload"></i> Chọn ảnh
        </button>
        <div class="modal fade" id="chonanhModal" tabindex="-1" role="dialog" aria-labelledby="chonanhModalLabel"
            aria-hidden="true">
            <div class="modal-dialog modal-dialog-centered" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h5 class="modal-title" id="chonanhModalLabel">Chọn ảnh từ thiết bị</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                            <span aria-hidden="true">×</span>
                        </button>
                    </div>
                    <div class="modal-body">
                        <div id="actions">
                            <div class="docs-buttons">
                                <label class="btn btn-primary btn-upload btn-upanh" for="inputImage"
                                    title="Upload image file">
                                    <input type="file" class="sr-only" id="inputImage" name="file"
                                        accept=".jpg,.jpeg,.png,.gif,.bmp,.tiff">
                                    <span><i class="fas fa-upload"></i> Chọn ảnh</span>
                                </label>
                                <div class="cropanh-container mt-2" style="display:none">
                                    <div class="img-container">
                                        <img alt="Tạo ảnh đẹp" src="">
                                    </div>
                                    <div class="d-flex float-right">
                                        <div class="btn-group mr-2">
                                            <button type="button" class="btn btn-primary" data-method="rotate"
                                                data-option="-45" title="Rotate Left">
                                                <i class="fa fa-undo"></i>
                                            </button>
                                            <button type="button" class="btn btn-primary" data-method="rotate"
                                                data-option="45" title="Rotate Right">
                                                <i class="fa fa-redo"></i>
                                            </button>
                                        </div>
                                        <div class="btn-group mr-2">
                                            <button type="button" class="btn btn-primary" data-method="scaleX"
                                                data-option="-1" title="Flip Horizontal">
                                                <i class="fa fa-arrows-alt-h"></i>
                                            </button>
                                            <button type="button" class="btn btn-primary" data-method="scaleY"
                                                data-option="-1" title="Flip Vertical">
                                                <i class="fa fa-arrows-alt-v"></i>
                                            </button>
                                        </div>
                                        <button type="button" class="btn btn-primary" id="cropanh"
                                            data-method="getCroppedCanvas" data-dismiss="modal"
                                            data-option="{ &quot;width&quot;: 2000, &quot;height&quot;: 2000}">
                                            Cắt ảnh
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="custom-checkbox custom-control mt-2">
            <input type="checkbox" class="custom-control-input" id="botron" checked="">
            <label class="custom-control-label" for="botron">Bo tròn avatar</label>
        </div>
        <div class="mt-3">
            <button type="button" class="btn btn-primary disabled" id="tad-taoanh"><i class="fas fa-cut"></i> Tạo
                ảnh</button>
        </div>
        <div id="img-out" class="my-2"></div>



        <canvas width="2000" height="2000" id="temp"></canvas>

        <script>
            var tyle = 1 / 1; vmode = 1 ;var tenanhxuat = "tich_xanh"
            var imgtich = "https://1.bp.blogspot.com/-KVeUUs6gMr4/YGk5Lv9LMHI/AAAAAAAArdk/S8tCaIwwGckmWlJ__JCvxq2wnQkN76XMgCNcBGAsYHQ/s0/tick-1.png";
            var imgoverlay = "https://1.bp.blogspot.com/-ZLEOufb7EZM/YLX3UGBtJfI/AAAAAAAAtUA/mYPipUnp4vwFTV7iiB1kIS6DIRJJF1TdACNcBGAsYHQ/s0/overlay.png";

            var wcimg = 1640;

            $("#tad-taoanh").click(function () {
                $("#cropanh").click();
                $("#img-out").hide();
            $("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");


                draw();
            });



            $(".chonmau input").click(function () {

                imgtich = $(".chonmau input:checked").val();

            });


            $("#botron").click(function () {

            });

            $("#botron").change(function () {
                var btkhong = $(this).is(':checked');

                if (btkhong == true) {

                    wcimg = 1640;
                    imgoverlay = "https://1.bp.blogspot.com/-ZLEOufb7EZM/YLX3UGBtJfI/AAAAAAAAtUA/mYPipUnp4vwFTV7iiB1kIS6DIRJJF1TdACNcBGAsYHQ/s0/overlay.png";
                }
                else {
                    wcimg = 2000;

                    imgoverlay = "https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png"

                }



            });



            function draw() {

                var cimg = document.getElementById('Cimg');
                cimg.onload = function () {
                    var overlay = new Image;
                    overlay.crossOrigin = "Anonymous";
                    overlay.src = imgoverlay;
                    overlay.onload = function () {

                        var tich = new Image;
                        tich.crossOrigin = "Anonymous";
                        tich.src = imgtich;
                        tich.onload = function () {

                            var c = document.getElementById('temp');
                            var ctx = c.getContext('2d');
                            ctx.drawImage(cimg, c.width / 2 - wcimg / 2, c.height / 2 - wcimg / 2, wcimg, wcimg);
                            ctx.drawImage(overlay, 0, 0, c.width, c.height);
                            ctx.drawImage(tich, 0, 0, c.width, c.height);


                            c.toBlob(function(i) {
                                    var j = URL.createObjectURL(i);
                                    $("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='" + j + "' alt='Tạo ảnh đẹp' class='img-thumbnail'></img><a href='" + j + "' class='btn btn-block btn-primary mt-2'  download='taoanhdep_" + tenanhxuat + "'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a>");
                                  


                                    setTimeout(function(){   $("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh");
                                    $("#img-out").show() }, 1000);

                                }, "image/jpeg");


                        }
                    }
                }
            }





        </script>

    </div>
</body>

</html>