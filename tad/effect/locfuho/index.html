<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'
        media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>

<body class="col-md-9">


<label><b>Nhập tên*</b></label>
<input type="text" class="form-control tad-in-text1 mb-2" value="Tuấn đẹp trai" placeholder="Nhập tên">

    <div class="mt-3">
        <button type="button" class="btn btn-primary disabled d-block" id="tad-taoanh"><i class="fas fa-cut"></i> Tạo
            ảnh</button>
    </div>
    <div id="img-out" ></div>
    <canvas id="temp" width="1200" height="1600" style="display:none" ></canvas>
    <link rel="stylesheet" media='all' href="./fonts/stylesheet.css" />

    <script>tenanhxuat = "chuky2"</script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
    
    <script>
        $(document).ready(function () {
            // if (window.location.hostname == tmbq) {


            function draw(){


                    document.fonts.load('10pt "Patrick Hand"','à á ạ ả ã â ầ ấ ậ ẩ ẫ ă ằ ắ ặ ẳ ẵ è é ẹ ẻ ẽ ê ề ế ệ ể ễ ì í ị ỉ ĩ ò ó ọ ỏ õ ô ồ ố ộ ổ ỗ ơ ờ ớ ợ ở ỡ ù ú ụ ủ ũ ư ừ ứ ự ử ữ ỳ ý ỵ ỷ ỹ đ À Á Ạ Ả Ã Â Ầ Ấ Ậ Ẩ Ẫ Ă Ằ Ắ Ặ Ẳ Ẵ È É Ẹ Ẻ Ẽ Ê Ề Ế Ệ Ể Ễ Ì Í Ị Ỉ Ĩ Ò Ó Ọ Ỏ Õ Ô Ồ Ố Ộ Ổ Ỗ Ơ Ờ Ớ Ợ Ở Ỡ Ù Ú Ụ Ủ Ũ Ư Ừ Ứ Ự Ử Ữ Ỳ Ý Ỵ Ỷ Ỹ Đ').then(function () {

                            var layer = new Image;
                            layer.crossOrigin = "Anonymous";
                            layer.src = "https://1.bp.blogspot.com/-LINrQe6mi1Y/YUBt_VS2YVI/AAAAAAAAxNM/30_vv8Kl_RAFD5H42pVrTVxjtLsBK4bNgCNcBGAsYHQ/s0/bg.jpg";
                            layer.onload = function () {


                    
var text1 = $(".tad-in-text1").val();

                                        var c = document.getElementById('temp');
                                        var ctx = c.getContext('2d');

                                        ctx.drawImage(layer, 0, 0);

                                        ctx.save();
                                        ctx.font = "50px Patrick Hand";

                                        ctx.fillStyle = "#4a39a9";
                                        ctx.textAlign = "center";
                                        ctx.translate(940, 915);
                                        ctx.transform(1, 0, .2, 1, 0, 0);
                                        ctx.rotate(Math.PI / 180 * +16.5);

                                        ctx.fillText(text1, 0, 0);
                                        ctx.restore();


                                       

                                        c.toBlob(function (l) {
                                            var k = URL.createObjectURL(l);
                                            $("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='" + k + "' alt='Tạo ảnh đẹp' class='img-thumbnail'></img><a href='" + k + "' class='btn btn-block btn-primary mt-2'  download='taoanhdep_" + tenanhxuat + "'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a>");
                                          


                                            setTimeout(function () {

                                                $("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh");
                                            $("#img-out").show()


}, 1000)

                                        }, "image/jpeg");


                                    }
                           
               
                    })
                
}




            $("#tad-taoanh").click(function () {
                $("#img-out").hide();
                $("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");
             
                    draw();

           
            })
            // }
        });




    </script>


</body>

</html>