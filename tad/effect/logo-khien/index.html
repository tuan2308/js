<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <link as='style' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css' media='all' rel='stylesheet' />

    <script crossorigin='anonymous'
        integrity='sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg=='
        src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js'></script>

    <script src='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js'></script>


    <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" media="all">

</head>
<body>

    <label><b>Nhập tên*</b></label>
    <input type="text" class="form-control tad-in-text1 mb-2" maxlength="1" value="T" placeholder="Nhập tên">
    <label><b>Nhập tên*</b></label>
<input type="text" class="form-control tad-in-text2 mb-2" value="Tuấn" placeholder="Nhập tên">
<div class="mt-3">
    <button type="button" class="btn btn-primary disabled d-block" id="tad-taoanh"><i class="fas fa-cut"></i> Tạo
        ảnh</button>
</div>
<div id="img-out"></div>
    <link rel='stylesheet' href="https://cdn.taoanhdep.com/font/utm-godsword/stylesheet.css"/>
    <canvas id="temp" width="2000" height="2000"
    style="display: none;">
   
    </canvas>
    <script>tenanhxuat = "logo_khien"</script>
    <script>


var f = $(".tad-in-text1");
            var g = $(".tad-in-text2");
            f.on("input", function () {
                h()
            });
            g.on("input", function () {
                h()
            });

            function h() {
                if (undefined !== f.val() && f.val().length == 0) {
                    $("#tad-taoanh").addClass("disabled")
                } else {
                    if (undefined !== g.val() && g.val().length == 0) {
                        $("#tad-taoanh").addClass("disabled")
                    } else {
                        $("#tad-taoanh").removeClass("disabled")
                    }
                }
            }


            $("#tad-taoanh").click(function () {
                $("#img-out").hide();
                $("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");
       

                    draw();

               
            })

function draw(){
document.fonts.load('10pt "UTM Gods Word"').then(function () {
    document.fonts.load('10pt "UTM Gods Word"').then(function () {

        var t1 = $(".tad-in-text1").val();
        var t2 = $(".tad-in-text2").val();
var a = new Image();
                a.crossOrigin = "Anonymous";
                a.src = "https://1.bp.blogspot.com/-Rvvwd_3e6tc/YT8r74wMEqI/AAAAAAAAxKw/OQBCpkNXHbk7t9yIJXL923qn8JGzyR0dACNcBGAsYHQ/s0/bg.png";
                a.onload = function () {



                    var b = new Image();
                b.crossOrigin = "Anonymous";
                b.src = "https://1.bp.blogspot.com/-bk48U49-XHk/YT8soRpMx1I/AAAAAAAAxK4/WKOPumRo8Ho_4W83kVzmcbto49maTapoACNcBGAsYHQ/s0/gold.jpg";
                b.onload = function () {



    var c = document.getElementById("temp");
    var ctx = c.getContext("2d");
    ctx.clearRect(0, 0, c.width, c.height);




    ctx.drawImage(b,0,0,c.width,c.height);
    ctx.globalCompositeOperation = "destination-atop";
    ctx.font = "bold 150px UTM Gods Word";
    ctx.textAlign = "center";
    ctx.fillText(t2.toUpperCase(),c.width/2,1500);
    

    ctx.globalCompositeOperation = "destination-over";

   
    ctx.fillStyle = "#171921";
    ctx.font = "bold 300px UTM Gods Word";
    ctx.textAlign = "center";
    ctx.textBaseline = 'middle';
    ctx.fillText(t1.toUpperCase(),c.width/2,c.height/2 + 15);

    ctx.drawImage(a,0,0,c.width,c.height);
    ctx.restore();
    c.toBlob(function (l) {
                                            var k = URL.createObjectURL(l);
                                            $("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='" + k + "' alt='Tạo ảnh đẹp' class='img-thumbnail'></img><a href='" + k + "' class='btn btn-block btn-primary mt-2'  download='taoanhdep_" + tenanhxuat + "'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a>");
                                          


                                            setTimeout(function () {

                                                $("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh");
                                            $("#img-out").show()


}, 1000)

                                        }, "image/jpeg");
    
} } 

    })
})

}
</script>



</body>
</html>
