$(document).ready(function(){if(window.location.hostname==tmbq){$("head").append(cssCrop);$("head").append(jsCrop);$("body").append("<img src='https://1.bp.blogspot.com/-z3RZ2G93tVo/YHES6yUdnzI/AAAAAAAArsw/Jq_pD24Pn-sEW-XwzGl18qlgIYQZZOeqgCNcBGAsYHQ/s0/blank.png' crossorigin='anonymous' id='Cimg' class='d-none'/>");$("body").append("<img src='https://cdn.taoanhdep.com/tad/effect/chuyen-gia-2/bg-3.jpg' crossorigin='anonymous' id='Bimg' class='d-none'/>");$("body").append("<img src='https://cdn.taoanhdep.com/tad/effect/chuyen-gia-2/layer.png' crossorigin='anonymous' id='Limg' class='d-none'/>");$("body").append("<img src='https://cdn.taoanhdep.com/tad/effect/chuyen-gia-2/screen-2.jpg' crossorigin='anonymous' id='Simg' class='d-none'/>");var o=document.getElementById("Nimg");var i=document.getElementById("Cimg");var m=document.getElementById("Bimg");var k=document.getElementById("Limg");var n=document.getElementById("Mimg");var f="1180";$("#tad-taoanh").click(function(){if($(".btn-chonanh").length!==0){$("#cropanh").click()}if($(".tad-in-text1").val()==""){alert("Vui lòng nhập tên");$(".tad-in-text1").focus();return false}$("#img-out").hide();$("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");setTimeout(function(){document.fonts.load('10pt "Oswald"',"Tuấn").then(l)},1000)});function l(){c=document.querySelector("canvas"),ctx=c.getContext("2d");ctx.clearRect(0,0,c.width,c.height);ctx.save();ctx.drawImage(m,0,0,c.width,c.height);ctx.restore();ctx.save();ctx.beginPath();ctx.arc(750,500,250,250,Math.PI*2,true);ctx.closePath();ctx.clip();ctx.drawImage(i,500,250,500,500);ctx.restore();ctx.save();ctx.drawImage(k,0,0,c.width,c.height);ctx.restore();ctx.save();var a=$(".tad-in-text1").val().toUpperCase();ctx.textAlign="center";ctx.font="500 55px Oswald";var b=ctx.createLinearGradient(600,0,1000,0);b.addColorStop(0,"#EABD54");b.addColorStop(0.35,"#FFED91");b.addColorStop(0.65,"#ECC25A");b.addColorStop(1,"#FFF08A");ctx.fillStyle=b;ctx.fillText(a,c.width/2,690);ctx.restore();ctx.save();ctx.globalCompositeOperation="screen";ctx.drawImage(Simg,0,0,c.width,c.height);ctx.restore();c.toBlob(function(e){var d=URL.createObjectURL(e);$("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='"+d+"' alt='Tạo ảnh đẹp' class='img-thumbnail'></img><a href='"+d+"' class='btn btn-block btn-primary mt-2'  download='taoanhdep_"+tenanhxuat+"'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a>");$("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh");$("#img-out").show()},"image/jpeg")}window.onload=function(){var r=window.Cropper;var e=window.URL||window.webkitURL;var b=document.querySelector(".img-container");var a=b.getElementsByTagName("img").item(0);var h=document.getElementById("actions");var q={aspectRatio:tyle,viewMode:vmode,preview:".img-preview",autoCrop:true,strict:true,background:true,autoCropArea:1};var d=new r(a,q);var j=a.src;var p="image/jpeg";var g;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}h.querySelector(".docs-buttons").onclick=function(y){var u=y||window.event;var v=u.target||u.srcElement;var w;var t;var z;var x;if(!d){return}while(v!==this){if(v.getAttribute("data-method")){break}v=v.parentNode}if(v===this||v.disabled||v.className.indexOf("disabled")>-1){return}x={method:v.getAttribute("data-method"),target:v.getAttribute("data-target"),option:v.getAttribute("data-option")||undefined,secondOption:v.getAttribute("data-second-option")||undefined};w=d.cropped;if(x.method){if(typeof x.target!=="undefined"){z=document.querySelector(x.target);if(!v.hasAttribute("data-option")&&x.target&&z){try{x.option=JSON.parse(z.value)}catch(u){console.log(u.message)}}}switch(x.method){case"rotate":if(w){d.clear()}break;case"getCroppedCanvas":try{x.option=JSON.parse(x.option)}catch(u){console.log(u.message)}if(p==="image/jpeg"){if(!x.option){x.option={}}x.option.fillColor="#fff"}break}t=d[x.method](x.option,x.secondOption);switch(x.method){case"rotate":if(w){d.crop()}break;case"scaleX":case"scaleY":v.setAttribute("data-option",-x.option);break;case"getCroppedCanvas":if(t){t.toBlob(function(B){var A=e.createObjectURL(B);$("#Cimg").attr("src",A)},"image/png",1);$("#tad-taoanh").removeClass("disabled")}break;case"destroy":d=null;if(g){e.revokeObjectURL(g);g="";a.src=j}break}if(typeof t==="object"&&t!==d&&z){try{z.value=JSON.stringify(t)}catch(u){console.log(u.message)}}}};document.body.onkeydown=function(t){var u=t||window.event;if(!d||this.scrollTop>300){return}switch(u.keyCode){case 37:u.preventDefault();d.move(-1,0);break;case 38:u.preventDefault();d.move(0,-1);break;case 39:u.preventDefault();d.move(1,0);break;case 40:u.preventDefault();d.move(0,1);break}};$(".cropanh-container").hide();var s=document.getElementById("inputImage");if(e){s.onchange=function(){var u=this.files;var t;if(d&&u&&u.length){t=u[0];if(/^image\/\w+/.test(t.type)){p=t.type;if(g){e.revokeObjectURL(g)}a.src=g=e.createObjectURL(t);d.destroy();d=new r(a,q);s.value=null;$("#tad-taoanh").removeClass("disabled");$(".cropanh-container").show();$(".btn-upanh span,.btn-chonanh").html("<i class='fas fa-upload'></i> Chọn ảnh khác")}else{window.alert("Please choose an image file.")}}}}else{s.disabled=true;s.parentNode.className+=" disabled"}}}});