$(document).ready(function(){if(window.location.hostname==tmbq){function d(e){e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a");e=e.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e");e=e.replace(/ì|í|ị|ỉ|ĩ/g,"i");e=e.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o");e=e.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u");e=e.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y");e=e.replace(/đ/g,"d");e=e.replace(/À|Á|Ạ|Ả|Ã|Â|Ầ|Ấ|Ậ|Ẩ|Ẫ|Ă|Ằ|Ắ|Ặ|Ẳ|Ẵ/g,"A");e=e.replace(/È|É|Ẹ|Ẻ|Ẽ|Ê|Ề|Ế|Ệ|Ể|Ễ/g,"E");e=e.replace(/Ì|Í|Ị|Ỉ|Ĩ/g,"I");e=e.replace(/Ò|Ó|Ọ|Ỏ|Õ|Ô|Ồ|Ố|Ộ|Ổ|Ỗ|Ơ|Ờ|Ớ|Ợ|Ở|Ỡ/g,"O");e=e.replace(/Ù|Ú|Ụ|Ủ|Ũ|Ư|Ừ|Ứ|Ự|Ử|Ữ/g,"U");e=e.replace(/Ỳ|Ý|Ỵ|Ỷ|Ỹ/g,"Y");e=e.replace(/Đ/g,"D");e=e.replace(/\u0300|\u0301|\u0303|\u0309|\u0323/g,"");e=e.replace(/\u02C6|\u0306|\u031B/g,"");e=e.replace(/ + /g," ");e=e.trim();e=e.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," ");return e}var c=$(".tad-in-text1");var b=$(".tad-in-text2");c.on("input",function(){a()});b.on("input",function(){a()});function a(){if(undefined!==c.val()&&c.val().length==0){$("#tad-taoanh").addClass("disabled")}else{if(undefined!==b.val()&&b.val().length==0){$("#tad-taoanh").addClass("disabled")}else{$("#tad-taoanh").removeClass("disabled")}}}$("#tad-taoanh").click(function(){$("#img-out").hide();$("#tad-taoanh").addClass("disabled").html("<span class='spinner-border spinner-border-sm'></span> Đang tạo ảnh");setTimeout(function(){document.fonts.load('10pt "Signature Collection"').then(function(){document.fonts.load('10pt "Dutchbrigade"').then(function(){document.fonts.load('10pt "UTM Avo"').then(function(){var e=new Image;e.crossOrigin="Anonymous";e.src="https://cdn.taoanhdep.com/tad/effect/chuky2/layer.png";e.onload=function(){var f=new Image;f.crossOrigin="Anonymous";f.src="https://cdn.taoanhdep.com/tad/effect/chuky2/tym1.png";f.onload=function(){var g=new Image;g.crossOrigin="Anonymous";g.src="https://cdn.taoanhdep.com/tad/effect/chuky2/tym2.png";g.onload=function(){var n=document.getElementById("temp");var r=n.getContext("2d");r.clearRect(0,0,n.width,n.height);r.save();r.fillStyle="#fff";r.fillRect(0,0,n.width,n.height);r.restore();r.font="200px Dutchbrigade";r.fillStyle="black";var k=d($(".tad-in-text1").val());var j=$(".tad-in-text2").val();var h=$(".tad-out-texta").val();var p=n.width/2;var o=360;r.save();r.textAlign="center";r.strokeStyle="black";r.lineWidth=22;r.lineJoin="round";r.miterLimit=2;r.strokeText(j,p,o);r.fillText(j,p,o);var m=r.measureText(j).width;console.log(m);r.restore();r.save();r.textAlign="center";r.strokeStyle="white";r.lineWidth=10;r.lineJoin="round";r.miterLimit=2;r.strokeText(j,p,o);r.fillText(j,p,o);r.restore();r.save();r.font="80px Signature Collection";r.textAlign="center";r.textBaseline="middle";r.translate(n.width/2,312);r.rotate(Math.PI/180*-15);r.strokeStyle="white";r.lineWidth=16;r.lineJoin="round";r.miterLimit=2;r.strokeText(k,0,0);r.fillText(k,0,0);r.restore();r.save();r.drawImage(e,0,0);r.drawImage(f,n.width/2-m/2-100,250);r.drawImage(g,n.width/2+m/2+10,190);r.restore();r.save();r.font="27px UTM Avo";var p=n.width/2;var o=460;var q=30;var s=h.split("\n");r.textAlign="center";for(var l=0;l<s.length;l++){r.fillText(s[l],p,o+(l*q))}r.restore();n.toBlob(function(i){var t=URL.createObjectURL(i);$("#img-out").html("<label class='mt-2'> Kết quả: </label><img src='"+t+"' alt='Tạo ảnh đẹp' class='img-thumbnail'></img><a href='"+t+"' class='btn btn-block btn-primary mt-2' download='taoanhdep_"+tenanhxuat+"'><i class='fas fa-cloud-download-alt'></i> Tải ảnh về</a>");$("#tad-taoanh").removeClass("disabled").html("<i class='fas fa-cut'></i> Tạo ảnh");$("#img-out").show()},"image/jpeg")}}}})})})},1000)})}});