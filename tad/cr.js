$(document).ready(function(){if(window.location.hostname==tmbq){window.onload=function(){var j=window.Cropper;var h=window.URL||window.webkitURL;var c=document.querySelector(".img-container");var d=c.getElementsByTagName("img").item(0);var f=document.getElementById("actions");var k={aspectRatio:tyle,viewMode:vmode,preview:".img-preview",autoCrop:true,strict:true,background:true,autoCropArea:1};var b=new j(d,k);var e=d.src;var a="image/jpeg";var g;if(!document.createElement("canvas").getContext){$('button[data-method="getCroppedCanvas"]').prop("disabled",true)}if(typeof document.createElement("cropper").style.transition==="undefined"){$('button[data-method="rotate"]').prop("disabled",true);$('button[data-method="scale"]').prop("disabled",true)}f.querySelector(".docs-buttons").onclick=function(n){var r=n||window.event;var q=r.target||r.srcElement;var p;var l;var m;var o;if(!b){return}while(q!==this){if(q.getAttribute("data-method")){break}q=q.parentNode}if(q===this||q.disabled||q.className.indexOf("disabled")>-1){return}o={method:q.getAttribute("data-method"),target:q.getAttribute("data-target"),option:q.getAttribute("data-option")||undefined,secondOption:q.getAttribute("data-second-option")||undefined};p=b.cropped;if(o.method){if(typeof o.target!=="undefined"){m=document.querySelector(o.target);if(!q.hasAttribute("data-option")&&o.target&&m){try{o.option=JSON.parse(m.value)}catch(r){console.log(r.message)}}}switch(o.method){case"rotate":if(p){b.clear()}break;case"getCroppedCanvas":try{o.option=JSON.parse(o.option)}catch(r){console.log(r.message)}if(a==="image/jpeg"){if(!o.option){o.option={}}o.option.fillColor="#fff"}break}l=b[o.method](o.option,o.secondOption);switch(o.method){case"rotate":if(p){b.crop()}break;case"scaleX":case"scaleY":q.setAttribute("data-option",-o.option);break;case"getCroppedCanvas":if(l){$(".anhdacat").html(l)}break;case"destroy":b=null;if(g){h.revokeObjectURL(g);g="";d.src=e}break}if(typeof l==="object"&&l!==b&&m){try{m.value=JSON.stringify(l)}catch(r){console.log(r.message)}}}};document.body.onkeydown=function(l){var m=l||window.event;if(!b||this.scrollTop>300){return}switch(m.keyCode){case 37:m.preventDefault();b.move(-1,0);break;case 38:m.preventDefault();b.move(0,-1);break;case 39:m.preventDefault();b.move(1,0);break;case 40:m.preventDefault();b.move(0,1);break}};$(".cropanh-container").hide();var i=document.getElementById("inputImage");if(h){i.onchange=function(){var m=this.files;var l;if(b&&m&&m.length){l=m[0];if(/^image\/\w+/.test(l.type)){a=l.type;if(g){h.revokeObjectURL(g)}d.src=g=h.createObjectURL(l);b.destroy();b=new j(d,k);i.value=null;$(".cropanh-container").show();$(".btn-upanh span,.btn-chonanh").html("<i class='fas fa-upload'></i> Chọn ảnh khác")}else{window.alert("Vui lòng chọn một tệp hình ảnh.")}}}}else{i.disabled=true;i.parentNode.className+=" disabled"}};}});